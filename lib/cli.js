// Generated by CoffeeScript 2.0.0-beta7
void function () {
  var argv, cli, config, directory, minimist, npub;
  npub = require('./index');
  minimist = require('minimist');
  cli = function (argv, directory, config) {
    var command, testCommand, version;
    command = argv._[0];
    switch (command) {
    case 'prep':
      return npub.prep(directory, config);
    case 'publish':
      version = argv.v || argv._[1];
      if (!(null != version)) {
        console.log('<version> required for command: npub publish <version>');
        process.exit(2);
      }
      testCommand = argv.t || argv.test;
      return npub.publish(directory, version, testCommand, config);
    case 'verify':
      return npub.verify(directory, function (err) {
        if (err)
          return process.exit(2);
      });
    default:
      return console.log('invalid command: "' + command + '"');
    }
  };
  argv = minimist(process.argv.slice(2));
  directory = process.cwd();
  config = require('' + directory + '/package.json').publishConfig;
  if (null != config) {
    delete config.registry;
    delete config.tag;
  }
  cli(argv, directory, config);
}.call(this);
