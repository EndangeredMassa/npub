// Generated by CoffeeScript 2.0.0-beta7
void function () {
  var changelog, commitChanges, ensureCleanStage, git, license, openEditor, updateVersion;
  license = require('./license');
  ensureCleanStage = require('./clean-stage');
  changelog = require('./changelog');
  openEditor = require('./editor');
  updateVersion = require('./version');
  commitChanges = require('./commit-changes');
  git = require('./git');
  module.exports = function (dir, version, config) {
    return ensureCleanStage(dir, function () {
      license(dir, config);
      return ensureCleanStage(dir, function () {
        return changelog.build(dir, function (tempChangelog) {
          var tempChangelogPath;
          tempChangelogPath = changelog.write(tempChangelog);
          return openEditor(tempChangelogPath, function () {
            changelog.update(dir, tempChangelogPath);
            updateVersion(dir, version);
            return commitChanges(dir, version, function () {
              return git.tag(dir, 'v' + version, function () {
                return console.log('tagged!');
              });
            });
          });
        });
      });
    });
  };
}.call(this);
