// Generated by CoffeeScript 2.0.0-beta7
void function () {
  var fs, git, mkdirp, touch;
  git = require('./git');
  fs = require('fs');
  mkdirp = require('mkdirp');
  touch = require('touch');
  module.exports = {
    build: function (dir, callback) {
      return git.diffSinceLastTag(dir, callback);
    },
    write: function (changelog, filePath) {
      if (null == filePath)
        filePath = '/tmp/npub/changelog.md';
      mkdirp.sync('/tmp/npub');
      fs.writeFileSync(filePath, changelog);
      return filePath;
    },
    update: function (dir, filePath) {
      var changelogPath, currentChangelog, newChangelog;
      changelogPath = '' + dir + '/CHANGELOG.md';
      touch.sync(changelogPath);
      newChangelog = fs.readFileSync(filePath);
      currentChangelog = fs.readFileSync(changelogPath);
      newChangelog += currentChangelog;
      return this.write(newChangelog, changelogPath);
    }
  };
}.call(this);
